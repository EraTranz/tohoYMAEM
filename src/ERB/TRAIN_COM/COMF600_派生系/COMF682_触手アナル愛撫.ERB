;=============================================================================
;触手アナル愛撫
;=============================================================================
;--------------------------------------------------
;実行判定
;--------------------------------------------------
@EXCOM_ABLE682
#FUNCTION
;個別設定コマンドフィルタ
SIF DITEMTYPE:999:682 > 0
	RETURNF 0
;触手調教中でないとダメ
SIF TEQUIP:触手調教 == 0
	RETURNF 0
;距離のチェック
SIF EQUIP:戦闘中 && COM_ABLE_BATTLE(TARGET, PLAYER, 682) == 0
	RETURNF 0
RETURNF 1

;--------------------------------------------------
;コマンド本体
;--------------------------------------------------
@COM682
PRINTL 触手アナル愛撫

;戦闘判定
CALL COM_TRY_BATTLE, 682
;実行できない
SIF RESULT == 1
	RETURN 1

TSTR:0 = 触手アナル愛撫
SELECTCOM = 682
CALL DISPLAY_KOJO_TRAIN_MESSAGE_F_COM

DOWNBASE:0 += 20
DOWNBASE:1 += 100

SOURCE:露出 = 850
SOURCE:逸脱 = 400

;ABL:Ａ感覚をみる
IF ABL:Ａ感覚 == 0
	SOURCE:快Ａ = 20
	SOURCE:屈従 = 300
ELSEIF ABL:Ａ感覚 == 1
	SOURCE:快Ａ = 75
	SOURCE:屈従 = 350
ELSEIF ABL:Ａ感覚 == 2
	SOURCE:快Ａ = 300
	SOURCE:屈従 = 400
ELSEIF ABL:Ａ感覚 == 3
	SOURCE:快Ａ = 700
	SOURCE:屈従 = 650
ELSEIF ABL:Ａ感覚 == 4
	SOURCE:快Ａ = 1100
	SOURCE:屈従 = 1000
ELSE
	SOURCE:快Ａ = 1500
	SOURCE:屈従 = 1500
ENDIF

;EXP:Ａ経験をみる
IF EXP:Ａ経験 < EXPLV:1
	TIMES SOURCE:快Ａ , 0.20
	TIMES SOURCE:屈従 , 0.20
	SOURCE:痛み = 500
ELSEIF EXP:Ａ経験 < EXPLV:2
	TIMES SOURCE:快Ａ , 0.50
	TIMES SOURCE:屈従 , 0.50
	SOURCE:痛み = 400
ELSEIF EXP:Ａ経験 < EXPLV:3
	TIMES SOURCE:快Ａ , 1.00
	TIMES SOURCE:屈従 , 1.00
	SOURCE:痛み = 300
ELSEIF EXP:Ａ経験 < EXPLV:4
	TIMES SOURCE:快Ａ , 1.20
	TIMES SOURCE:屈従 , 1.20
	SOURCE:痛み = 200
ELSEIF EXP:Ａ経験 < EXPLV:5
	TIMES SOURCE:快Ａ , 1.60
	TIMES SOURCE:屈従 , 1.60
	SOURCE:痛み = 100
ELSE
	TIMES SOURCE:快Ａ , 1.80
	TIMES SOURCE:屈従 , 1.80
	SOURCE:痛み = 50
ENDIF

;PALAM:潤滑をみる
IF PALAM:潤滑 < PALAMLV:1
	TIMES SOURCE:快Ａ , 0.10
	TIMES SOURCE:屈従 , 0.10
	TIMES SOURCE:痛み , 3.00
ELSEIF PALAM:潤滑 < PALAMLV:2
	TIMES SOURCE:快Ａ , 0.20
	TIMES SOURCE:屈従 , 0.20
	TIMES SOURCE:痛み , 2.00
ELSEIF PALAM:潤滑 < PALAMLV:3
	TIMES SOURCE:快Ａ , 0.60
	TIMES SOURCE:屈従 , 0.60
	TIMES SOURCE:痛み , 1.00
ELSEIF PALAM:潤滑 < PALAMLV:4
	TIMES SOURCE:快Ａ , 1.00
	TIMES SOURCE:屈従 , 1.00
	TIMES SOURCE:痛み , 0.50
ELSE
	TIMES SOURCE:快Ａ , 2.00
	TIMES SOURCE:屈従 , 2.00
	TIMES SOURCE:痛み , 0.10
ENDIF

;PALAM:欲情をみる
IF PALAM:欲情 < PALAMLV:1
	TIMES SOURCE:快Ａ , 0.30
	TIMES SOURCE:屈従 , 0.30
ELSEIF PALAM:欲情 < PALAMLV:2
	TIMES SOURCE:快Ａ , 0.60
	TIMES SOURCE:屈従 , 0.60
ELSEIF PALAM:欲情 < PALAMLV:3
	TIMES SOURCE:快Ａ , 1.00
	TIMES SOURCE:屈従 , 1.00
ELSEIF PALAM:欲情 < PALAMLV:4
	TIMES SOURCE:快Ａ , 1.30
	TIMES SOURCE:屈従 , 1.30
ELSE
	TIMES SOURCE:快Ａ , 1.60
	TIMES SOURCE:屈従 , 1.60
ENDIF

;Ａ敏感、鈍感をみる
;快Ａ自体のチェックは後でまとめてやる
IF TALENT:Ａ鈍感
	TIMES SOURCE:痛み , 1.50
	TIMES SOURCE:屈従 , 1.50
	TIMES SOURCE:逸脱 , 1.50
ELSEIF TALENT:Ａ敏感
	TIMES SOURCE:痛み , 0.60
	TIMES SOURCE:屈従 , 0.60
	TIMES SOURCE:逸脱 , 0.60
ENDIF

;処女で貞操観念
IF TALENT:処女 == 1 && TALENT:貞操観念
	SOURCE:屈従 /= 3
ELSEIF TALENT:処女 && TALENT:貞操観念
	SOURCE:屈従 /= 2
ENDIF

TCVAR:Ａ経験 += 1

;奴隷のＡに触手の汚れがつく
STAIN:アナル |= 2
STAIN:アナル |= 4

IF TALENT:オトコ == 0 && TALENT:PLAYER:オトコ == 0
	TCVAR:レズ経験 += 2
ELSEIF TALENT:オトコ && TALENT:PLAYER:オトコ
	TCVAR:ＢＬ経験 += 5
ENDIF
RETURN 1

;--------------------------------------------------
;調教時メッセージ
;--------------------------------------------------
@SYSTXT_TRAIN_MESSAGE_F_COM_682
IF TEQUIP:Ａ系装着器具 == 1
	PRINTFORML %CALLNAME:TARGET%のアナルに入り込んだ粘液に塗れた触手は抜き差しを繰り返している…
ELSEIF TEQUIP:Ａ系装着器具 == 2
	PRINTFORML %CALLNAME:TARGET%の奥深くまで入りこんだ触手は肛門付近の部分を軽く捩り始めた…
ELSEIF TEQUIP:Ａ系装着器具 == 3
	PRINTFORML %CALLNAME:TARGET%を貫いていた触手は根元付近を軽く揺すり、菊門を刺激し始めた…
ELSEIF TEQUIP:Ａ系装着器具 == 4
	PRINTFORML %CALLNAME:TARGET%の腸内を撮影している触手が、さらなるシャッターチャンスを求めて蠢き始めた…
ELSE
	PRINTFORML 粘液に塗れた触手が%CALLNAME:TARGET%のアナルを刺激している…
ENDIF
